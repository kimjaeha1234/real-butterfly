<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì²­ì†Œë…„ ì¹´í˜ì¸ ì„­ì·¨ëŸ‰ ë¶„ì„ê¸°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 40px; padding-top: 20px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .card { background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); margin-bottom: 30px; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        .input-wrapper { display: flex; align-items: center; gap: 10px; }
        .form-group input { flex: 1; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; }
        .form-group input:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
        .input-unit { color: #666; font-weight: 500; min-width: 40px; }
        .section-title { font-size: 1.3em; font-weight: 700; color: #333; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #667eea; }
        .beverages-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .beverage-item { border: 2px solid #e0e0e0; border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s; background: white; }
        .beverage-item:hover { border-color: #667eea; box-shadow: 0 4px 12px rgba(102,126,234,0.15); }
        .beverage-item.selected { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-color: #667eea; }
        .beverage-name { font-weight: 600; margin-bottom: 8px; font-size: 0.95em; }
        .beverage-caffeine { font-size: 0.85em; opacity: 0.7; margin-bottom: 10px; }
        .quantity-control { display: flex; align-items: center; gap: 8px; justify-content: space-between; }
        .qty-btn { background: #f0f0f0; border: none; width: 30px; height: 30px; border-radius: 5px; cursor: pointer; font-weight: 700; transition: all 0.2s; }
        .qty-btn:hover { background: #ddd; }
        .beverage-item.selected .qty-btn { background: rgba(255,255,255,0.3); color: white; }
        .beverage-item.selected .qty-btn:hover { background: rgba(255,255,255,0.5); }
        .quantity { font-weight: 600; text-align: center; min-width: 25px; }
        .btn-group { display: flex; gap: 15px; margin-top: 30px; }
        button { flex: 1; padding: 15px 30px; border: none; border-radius: 8px; font-size: 1.05em; font-weight: 600; cursor: pointer; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .hidden { display: none; }
        .results { background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .status-badge { display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: 600; margin-bottom: 20px; font-size: 1.1em; }
        .status-safe { background: #d4edda; color: #155724; }
        .status-caution { background: #fff3cd; color: #856404; }
        .status-danger { background: #f8d7da; color: #721c24; }
        .intake-display { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .intake-box { text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px; }
        .intake-label { font-size: 0.9em; color: #666; margin-bottom: 8px; }
        .intake-value { font-size: 2em; font-weight: 700; color: #667eea; }
        .intake-unit { font-size: 0.6em; }
        .progress-bar { width: 100%; height: 30px; background: #e0e0e0; border-radius: 15px; overflow: hidden; margin: 20px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; }
        .progress-fill.danger-level { background: linear-gradient(90deg, #dc3545 0%, #c82333 100%); }
        .section { margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #667eea; }
        .section h3 { font-size: 1.2em; color: #333; margin-bottom: 15px; }
        .section ul { list-style: none; }
        .section li { padding: 10px 0; color: #555; line-height: 1.6; }
        .section li:before { content: "âœ“ "; color: #667eea; font-weight: 700; margin-right: 8px; }
        .danger { border-left-color: #dc3545; }
        .danger li:before { content: "âš  "; color: #dc3545; }
        .back-button { color: #667eea; cursor: pointer; font-weight: 600; margin-bottom: 20px; background: none; border: none; font-size: 1em; padding: 0; }
        .back-button:hover { text-decoration: underline; }
        .info-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; border-radius: 5px; margin: 20px 0; color: #1565c0; }
        .error-message { background: #f8d7da; color: #721c24; padding: 12px 15px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .error-message.show { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>â˜• ì²­ì†Œë…„ ì¹´í˜ì¸ ì„­ì·¨ëŸ‰ ë¶„ì„ê¸°</h1>
            <p>ë‹¹ì‹ ì˜ ì¹´í˜ì¸ ì„­ì·¨ê°€ ì•ˆì „í•œì§€ í™•ì¸í•´ë³´ì„¸ìš”</p>
        </div>

        <div id="inputForm" class="card">
            <div class="form-group">
                <label for="age">ë‚˜ì´ (ë§Œ)</label>
                <div class="input-wrapper">
                    <input type="number" id="age" placeholder="ì˜ˆ: 17" min="8" max="19">
                    <span class="input-unit">ì„¸</span>
                </div>
            </div>

            <div class="form-group">
                <label for="weight">ëª¸ë¬´ê²Œ</label>
                <div class="input-wrapper">
                    <input type="number" id="weight" placeholder="ì˜ˆ: 60" min="20" max="150">
                    <span class="input-unit">kg</span>
                </div>
            </div>

            <div class="section-title">2ë‹¨ê³„: ìŒë£Œ ì„ íƒ</div>
            <p style="color: #666; margin-bottom: 20px;">ì˜¤ëŠ˜ ë§ˆì‹  ìŒë£Œë¥¼ í´ë¦­í•˜ê³  ìˆ˜ëŸ‰ì„ ì¡°ì ˆí•˜ì„¸ìš”.</p>

            <div class="beverages-grid" id="beveragesContainer"></div>

            <div class="info-box">ğŸ’¡ ì…ë ¥í•˜ì‹  ì •ë³´ëŠ” ì¹´í˜ì¸ ê¶Œì¥ëŸ‰ ê³„ì‚° ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©° ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>

            <div class="btn-group">
                <button class="btn-primary" onclick="analyzeIntake()">ê²°ê³¼ ë¶„ì„í•˜ê¸°</button>
            </div>

            <div class="error-message" id="errorMessage"></div>
        </div>

        <div id="resultsSection" class="hidden">
            <div class="results">
                <button class="back-button" onclick="goBack()">â† ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</button>
                <div id="statusBadge"></div>
                <div class="intake-display">
                    <div class="intake-box">
                        <div class="intake-label">í˜„ì¬ ì„­ì·¨ëŸ‰</div>
                        <div class="intake-value"><span id="totalIntakeDisplay">0</span><span class="intake-unit">mg</span></div>
                    </div>
                    <div class="intake-box">
                        <div class="intake-label">ê¶Œì¥ í•œê³„ëŸ‰</div>
                        <div class="intake-value"><span id="limitDisplay">0</span><span class="intake-unit">mg</span></div>
                    </div>
                    <div class="intake-box">
                        <div class="intake-label">ê¶Œì¥ëŸ‰ ëŒ€ë¹„</div>
                        <div class="intake-value"><span id="percentDisplay">0</span><span class="intake-unit">%</span></div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;">0%</div>
                </div>
                <div id="resultSummary"></div>
                <div id="benefitsSection"></div>
                <div id="warningSection"></div>
                <div id="recommendationSection"></div>
            </div>
        </div>
    </div>

    <script>
        const beverages = [
            {name:'ì•„ë©”ë¦¬ì¹´ë…¸ (Tall)',caffeine:150},{name:'ì•„ë©”ë¦¬ì¹´ë…¸ (Grande)',caffeine:225},{name:'ì•„ë©”ë¦¬ì¹´ë…¸ (Venti)',caffeine:300},
            {name:'ì¹´í˜ë¼ë–¼ (Tall)',caffeine:75},{name:'ì¹´í˜ë¼ë–¼ (Grande)',caffeine:100},{name:'ì¹´í˜ë¼ë–¼ (Venti)',caffeine:130},
            {name:'ì—ìŠ¤í”„ë ˆì†Œ (1 shot)',caffeine:75},{name:'ì—ìŠ¤í”„ë ˆì†Œ (2 shot)',caffeine:150},
            {name:'ëª¬ìŠ¤í„° ì—ë„ˆì§€',caffeine:77},{name:'ë ˆë“œë¶ˆ',caffeine:62.5},{name:'í•«ì‹ìŠ¤',caffeine:60}
        ];
        
        let selectedBeverages = {};

        function initBeverages() {
            const container = document.getElementById('beveragesContainer');
            beverages.forEach((b, i) => {
                const div = document.createElement('div');
                div.className = 'beverage-item';
                div.id = `b-${i}`;
                div.innerHTML = `<div class="beverage-name">${b.name}</div><div class="beverage-caffeine">${b.caffeine}mg</div>
                    <div class="quantity-control">
                        <button class="qty-btn" onclick="event.stopPropagation(); updateQty(${i},-1)">âˆ’</button>
                        <span class="quantity" id="q-${i}">0</span>
                        <button class="qty-btn" onclick="event.stopPropagation(); updateQty(${i},1)">+</button>
                    </div>`;
                container.appendChild(div);
            });
        }

        function updateQty(i, d) {
            selectedBeverages[i] = Math.max(0, (selectedBeverages[i] || 0) + d);
            if (selectedBeverages[i] === 0) delete selectedBeverages[i];
            updateUI();
        }

        function updateUI() {
            beverages.forEach((_, i) => {
                const q = selectedBeverages[i] || 0;
                document.getElementById(`q-${i}`).textContent = q;
                document.getElementById(`b-${i}`).classList.toggle('selected', q > 0);
            });
        }

        function analyzeIntake() {
            const age = parseInt(document.getElementById('age').value);
            const weight = parseInt(document.getElementById('weight').value);

            if (!age || age < 8 || age > 19) {
                document.getElementById('errorMessage').textContent = '8ì„¸ ì´ìƒ 19ì„¸ ì´í•˜ ì…ë ¥';
                document.getElementById('errorMessage').classList.add('show');
                setTimeout(() => document.getElementById('errorMessage').classList.remove('show'), 4000);
                return;
            }
            if (!weight || weight < 20) {
                document.getElementById('errorMessage').textContent = 'ëª¸ë¬´ê²Œ ì…ë ¥ í™•ì¸';
                document.getElementById('errorMessage').classList.add('show');
                setTimeout(() => document.getElementById('errorMessage').classList.remove('show'), 4000);
                return;
            }

            const total = Object.values(selectedBeverages).reduce((a,b)=>a+b,0);
            if (total === 0) {
                document.getElementById('errorMessage').textContent = 'ìŒë£Œ ì„ íƒ í•„ìš”';
                document.getElementById('errorMessage').classList.add('show');
                setTimeout(() => document.getElementById('errorMessage').classList.remove('show'), 4000);
                return;
            }

            const limit = weight * 2.5;
            let intake = 0;
            Object.entries(selectedBeverages).forEach(([i,q]) => intake += beverages[i].caffeine * q);

            const percent = (intake / limit) * 100;
            const status = percent > 100 ? (percent >= 160 ? 'danger' : 'caution') : 'safe';

            document.getElementById('totalIntakeDisplay').textContent = Math.round(intake);
            document.getElementById('limitDisplay').textContent = Math.round(limit);
            document.getElementById('percentDisplay').textContent = percent.toFixed(1);

            const pf = document.getElementById('progressFill');
            const pw = Math.min(percent, 100);
            pf.style.width = pw + '%';
            pf.textContent = Math.round(pw) + '%';
            
            // 100% ì´ˆê³¼ ì‹œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½
            if (percent > 100) {
                pf.classList.add('danger-level');
            } else {
                pf.classList.remove('danger-level');
            }

            const badges = {safe: 'ì•ˆì „ âœ“', caution: 'ì£¼ì˜ âš ', danger: 'ìœ„í—˜ âœ•'};
            const classes = {safe: 'status-safe', caution: 'status-caution', danger: 'status-danger'};
            document.getElementById('statusBadge').innerHTML = `<div class="status-badge ${classes[status]}">${badges[status]}</div>`;

            let summary = `í˜„ì¬ ê¶Œì¥ëŸ‰ì˜ <strong style="color:#667eea">${percent.toFixed(1)}%</strong>ë¥¼ ì„­ì·¨í•˜ì…¨ìŠµë‹ˆë‹¤.`;
            if (status !== 'safe') summary += ' ê³¼ë„í•œ ì¹´í˜ì¸ ì„­ì·¨ëŠ” ìˆ˜ë©´ ì¥ì• ì™€ ì„±ì¥ì„ ë°©í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            document.getElementById('resultSummary').innerHTML = `<p style="font-size:1.1em;line-height:1.8;color:#333">${summary}</p>`;

            // ì ì •ëŸ‰ì¼ ë•Œë§Œ íš¨ê³¼ í‘œì‹œ
            if (status === 'safe') {
                document.getElementById('benefitsSection').innerHTML = `<div class="section">
                    <h3>âœ“ ì ì • ì„­ì·¨ ì‹œ íš¨ê³¼</h3><ul><li>ì§‘ì¤‘ë ¥ê³¼ ê¸°ì–µë ¥ í–¥ìƒ</li><li>í”¼ë¡œê° ê°ì†Œ</li><li>ìš´ë™ ëŠ¥ë ¥ ê°œì„ </li><li>ì‹ ì§„ëŒ€ì‚¬ ì´‰ì§„</li><li>ë°˜ì‘ì†ë„ ê°œì„ </li></ul></div>`;
                document.getElementById('warningSection').innerHTML = '';
                document.getElementById('recommendationSection').innerHTML = '';
            } else {
                // ë¶€ì‘ìš©
                document.getElementById('warningSection').innerHTML = `<div class="section danger">
                    <h3>âš  ê³¼ë‹¤ ì„­ì·¨ ë¶€ì‘ìš©</h3><ul><li>ë¶ˆë©´ì¦ ë° ìˆ˜ë©´ì¥ì• </li><li>ë¶ˆì•ˆê° ë° ì‹ ê²½ê³¼ë¯¼</li><li>ì‹¬ê³„í•­ì§„ (ë¹ ë¥¸ ì‹¬ì¥ë°•ë™)</li><li>ë‘í†µ ë° ì–´ì§€ëŸ¬ì›€</li><li>ì†Œí™”ë¶ˆëŸ‰</li><li>ì•ˆì ˆë¶€ì ˆëª»í•¨</li><li>ì§‘ì¤‘ë ¥ ì €í•˜</li><li>ì„±ì¥ ì €í•´</li></ul></div>`;

                // ê¶Œì¥ í•´ê²°ì±…
                let recs, title;
                if (percent >= 160) {
                    title = 'âš ï¸ ê¸´ê¸‰ ì¡°ì¹˜ í•„ìš”';
                    recs = ['ì¦‰ì‹œ ì¹´í˜ì¸ ì¤‘ë‹¨','ë¬¼ ì¶©ë¶„íˆ ì„­ì·¨','ë³‘ì› ë°©ë¬¸ ê³ ë ¤','24ì‹œê°„ íœ´ì‹ í•„ìš”','ì¹¼ë¥¨ ë§ì€ ìŒì‹ ì„­ì·¨ (ë°”ë‚˜ë‚˜, í† ë§ˆí† )','ì¼ì£¼ì¼ ë™ì•ˆ ì¹´í˜ì¸ ì œí•œ','ê¹Šì€ í˜¸í¡ ìš´ë™','ì˜ë£Œ ì „ë¬¸ê°€ ìƒë‹´'];
                } else if (percent >= 140) {
                    title = 'ì£¼ì˜ í•„ìš”í•œ ìƒíƒœ';
                    recs = ['ì¹´í˜ì¸ ì„­ì·¨ ì¦‰ì‹œ ì¤‘ë‹¨','ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨','ìŠ¤íŠ¸ë ˆì¹­ê³¼ ê°€ë²¼ìš´ ìš´ë™','ê³¼ì¼ (ë”¸ê¸°, í¬ë„) ì„­ì·¨','ì¹´í˜ì¸ ì—†ëŠ” ìŒë£Œë¡œ ì „í™˜','ìµœì†Œ 8ì‹œê°„ ì´ìƒ ìˆ™ë©´','ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ í™œë™','2-3ì¼ ê²½ê³¼ í›„ ìƒíƒœ í™•ì¸'];
                } else {
                    title = 'ê°œì„  ê¶Œì¥';
                    recs = ['ë¬¼ ì¶”ê°€ ì„­ì·¨ (í•˜ë£¨ 2L ì´ìƒ)','ë””ì¹´í˜ì¸ ìŒë£Œë¡œ ì „í™˜','ìŒë£Œ ì„­ì·¨ ê°„ê²© ëŠ˜ë¦¬ê¸°','ì„­ì·¨ëŸ‰ ì ˆë°˜ìœ¼ë¡œ ì¤„ì´ê¸°','ì˜¤í›„ 3ì‹œ ì´í›„ ê¸ˆì§€','ì²œì²œíˆ ê°ì†Œí•˜ê¸°','ìš´ë™ìœ¼ë¡œ ëŒ€ì‚¬ ì´‰ì§„','ì¢‹ì€ ìˆ˜ë©´ ìŠµê´€ í˜•ì„±'];
                }

                document.getElementById('recommendationSection').innerHTML = `<div class="section danger">
                    <h3>ğŸ’¡ ${title}</h3><ul>${recs.map(r=>`<li>${r}</li>`).join('')}</ul></div>`;
            }

            document.getElementById('inputForm').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            scrollTo(0, 0);
        }

        function goBack() {
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('inputForm').classList.remove('hidden');
            document.getElementById('age').value = '';
            document.getElementById('weight').value = '';
            selectedBeverages = {};
            updateUI();
            document.getElementById('errorMessage').classList.remove('show');
            scrollTo(0, 0);
        }

        initBeverages();
    </script>
</body>
</html>